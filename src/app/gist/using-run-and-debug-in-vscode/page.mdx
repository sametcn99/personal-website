# How to Use Run and Debug Configurations in VS Code

## Introduction

Visual Studio Code provides powerful debugging capabilities through its Run and Debug configurations. This comprehensive guide covers everything from basic setup to advanced debugging scenarios, helping developers maximize their debugging efficiency.

### Why Use VS Code Debugger?

- Integrated debugging experience
- Support for multiple languages
- Rich debugging features
- Customizable configurations
- Extension ecosystem for additional debugging capabilities

## Understanding launch.json

### Structure and Location

The `launch.json` file is the cornerstone of VS Code's debugging configuration:

- Located in `.vscode/launch.json`
- JSON format with IntelliSense support
- Supports multiple configurations
- Environment-specific settings

### Basic Structure

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Node.js Program",
      "program": "${workspaceFolder}/app.js",
      "skipFiles": ["<node_internals>/**"]
    }
  ]
}
```

### Configuration Inheritance

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Base Config",
            "type": "node",
            "request": "launch",
            "skipFiles": ["<node_internals>/**"]
        },
        {
            "name": "Development",
            "program": "${workspaceFolder}/src/dev.js",
            ...Base Config
        },
        {
            "name": "Production",
            "program": "${workspaceFolder}/src/prod.js",
            ...Base Config
        }
    ]
}
```

## Creating Debug Configurations

### Method 1: Using the Debug View

Detailed steps:

1. Open Command Palette (Ctrl+Shift+P)
2. Type "Debug: Open launch.json"
3. Select environment
4. Customize generated configuration

### Method 2: Manual Creation

Step-by-step guide:

1. Create `.vscode` folder:

   ```bash
   mkdir .vscode
   ```

2. Create `launch.json`:

   ```bash
   touch .vscode/launch.json
   ```

3. Add basic configuration structure
4. Customize per project needs

### Auto-configuration Detection

VS Code can automatically detect and configure debugging for:

- Node.js
- Python
- PHP
- Go
- Ruby
- and more...

## Common Configuration Properties

### Essential Properties

1. **type**: Debugger type

   - node
   - python
   - php
   - go
   - cppdbg
   - coreclr

2. **request**: Debug mode

   - launch: Start new instance
   - attach: Connect to running instance

3. **name**: Configuration identifier

   - Used in debug dropdown
   - Should be descriptive

4. **program**: Entry point
   - Absolute or relative path
   - Supports variables

### Advanced Properties

1. **args**: Command line arguments

   ```json
   {
     "args": ["--env", "development", "--port", "3000"]
   }
   ```

2. **env**: Environment variables

   ```json
   {
     "env": {
       "NODE_ENV": "development",
       "DEBUG": "app:*",
       "API_KEY": "secret-key"
     }
   }
   ```

3. **envFile**: Environment file

   ```json
   {
     "envFile": "${workspaceFolder}/.env"
   }
   ```

4. **cwd**: Working directory

   ```json
   {
     "cwd": "${workspaceFolder}/src"
   }
   ```

## Language-Specific Examples

### JavaScript/Node.js

#### Basic Node.js Application

```json
{
  "type": "node",
  "request": "launch",
  "name": "Debug Node.js",
  "program": "${workspaceFolder}/index.js",
  "skipFiles": ["<node_internals>/**"],
  "outFiles": ["${workspaceFolder}/dist/**/*.js"],
  "runtimeArgs": ["--inspect"],
  "console": "integratedTerminal",
  "internalConsoleOptions": "neverOpen"
}
```

#### Express Application

```json
{
  "type": "node",
  "request": "launch",
  "name": "Debug Express",
  "program": "${workspaceFolder}/bin/www",
  "env": {
    "PORT": "3000",
    "NODE_ENV": "development"
  },
  "serverReadyAction": {
    "pattern": "listening on port ([0-9]+)",
    "uriFormat": "http://localhost:%s",
    "action": "openExternally"
  }
}
```

#### TypeScript Application

```json
{
  "type": "node",
  "request": "launch",
  "name": "Debug TypeScript",
  "program": "${workspaceFolder}/src/index.ts",
  "preLaunchTask": "tsc: build - tsconfig.json",
  "outFiles": ["${workspaceFolder}/dist/**/*.js"],
  "sourceMaps": true,
  "resolveSourceMapLocations": ["${workspaceFolder}/**", "!**/node_modules/**"]
}
```

### Python

#### Basic Python Script

```json
{
  "type": "python",
  "request": "launch",
  "name": "Python: Current File",
  "program": "${file}",
  "console": "integratedTerminal",
  "justMyCode": true,
  "env": {
    "PYTHONPATH": "${workspaceFolder}"
  }
}
```

#### Django Application

```json
{
  "type": "python",
  "request": "launch",
  "name": "Django",
  "program": "${workspaceFolder}/manage.py",
  "args": ["runserver"],
  "django": true,
  "env": {
    "DJANGO_SETTINGS_MODULE": "myproject.settings"
  }
}
```

#### Flask Application

```json
{
  "type": "python",
  "request": "launch",
  "name": "Flask",
  "module": "flask",
  "env": {
    "FLASK_APP": "app.py",
    "FLASK_ENV": "development"
  },
  "args": ["run", "--no-debugger"]
}
```

### Java

#### Spring Boot Application

```json
{
  "type": "java",
  "request": "launch",
  "name": "Spring Boot",
  "mainClass": "com.example.Application",
  "projectName": "my-spring-project",
  "args": ["--spring.profiles.active=dev"],
  "env": {
    "SERVER_PORT": "8080"
  }
}
```

#### Maven Project

```json
{
  "type": "java",
  "request": "launch",
  "name": "Maven Debug",
  "mainClass": "${file}",
  "projectName": "my-maven-project",
  "preLaunchTask": "maven-compile"
}
```

### C/C++

#### Basic C++ Application

```json
{
  "type": "cppdbg",
  "request": "launch",
  "name": "Debug C++",
  "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
  "args": [],
  "stopAtEntry": false,
  "cwd": "${workspaceFolder}",
  "environment": [],
  "externalConsole": false,
  "MIMode": "gdb",
  "setupCommands": [
    {
      "description": "Enable pretty-printing",
      "text": "-enable-pretty-printing",
      "ignoreFailures": true
    }
  ],
  "preLaunchTask": "C/C++: g++ build active file"
}
```

## Advanced Debug Features

### Breakpoint Types

1. **Line Breakpoints**

   - Click gutter
   - F9 keyboard shortcut
   - Toggle with debugger

2. **Conditional Breakpoints**

   ```json
   {
     "condition": "count > 42",
     "hitCount": 3,
     "logMessage": "count is ${count}"
   }
   ```

3. **Function Breakpoints**

   - Break on function name
   - Support regex patterns
   - Conditional execution

4. **Data Breakpoints**
   - Watch for variable changes
   - Break on value modification
   - Memory address monitoring

### Advanced Breakpoint Features

1. **Hit Count Conditions**

   ```json
   {
     "hitCount": {
       "type": "equals",
       "value": 3
     }
   }
   ```

2. **Expression Evaluation**

   ```json
   {
     "condition": "typeof myVar === 'string' && myVar.length > 10"
   }
   ```

3. **Log Points**

   ```json
   {
     "logMessage": "Variable x = {x}, y = {y}",
     "condition": "x > y"
   }
   ```

## Remote Debugging

### SSH Configuration

```json
{
  "type": "node",
  "request": "attach",
  "name": "Remote SSH Debug",
  "address": "192.168.1.100",
  "port": 9229,
  "localRoot": "${workspaceFolder}",
  "remoteRoot": "/home/user/app"
}
```

### WSL Configuration

```json
{
  "type": "node",
  "request": "launch",
  "name": "Debug in WSL",
  "useWSL": true,
  "program": "${workspaceFolder}/index.js"
}
```

## Docker Debugging

### Node.js in Docker

```json
{
  "type": "docker",
  "request": "launch",
  "name": "Docker Node.js",
  "platform": "node",
  "containerName": "my-node-app",
  "dockerFile": "${workspaceFolder}/Dockerfile",
  "remoteRoot": "/usr/src/app"
}
```

### Python in Docker

```json
{
  "type": "docker",
  "request": "launch",
  "name": "Docker Python",
  "platform": "python",
  "pythonPath": "/usr/local/bin/python",
  "dockerFile": "${workspaceFolder}/Dockerfile",
  "volumes": ["${workspaceFolder}:/app"]
}
```

## Browser Debugging

### Chrome Debug Configuration

```json
{
  "type": "chrome",
  "request": "launch",
  "name": "Launch Chrome",
  "url": "http://localhost:3000",
  "webRoot": "${workspaceFolder}/src",
  "sourceMapPathOverrides": {
    "webpack:///src/*": "${webRoot}/*"
  }
}
```

### Firefox Debug Configuration

```json
{
  "type": "firefox",
  "request": "launch",
  "name": "Firefox Debug",
  "url": "http://localhost:3000",
  "webRoot": "${workspaceFolder}",
  "pathMappings": [
    {
      "url": "webpack:///src",
      "path": "${workspaceFolder}/src"
    }
  ]
}
```

## Debug Console and REPL

### Debug Console Features

1. Expression evaluation
2. Object inspection
3. Variable watching
4. Call stack navigation

### REPL Commands

```javascript
// Debug console commands
.help           // Show all commands
.clear          // Clear the console
.break          // Exit current debug session
.editor         // Enter multi-line editing mode
```

## Performance Profiling

### CPU Profiling

```json
{
  "type": "node",
  "request": "launch",
  "name": "Profile Node.js",
  "program": "${workspaceFolder}/index.js",
  "runtimeArgs": ["--prof"],
  "profileStartup": true
}
```

### Memory Profiling

```json
{
  "type": "node",
  "request": "launch",
  "name": "Memory Profile",
  "program": "${workspaceFolder}/index.js",
  "runtimeArgs": ["--inspect-brk"],
  "console": "integratedTerminal"
}
```

## Tips and Best Practices

### 1. Workspace Variables

```json
{
  "program": "${workspaceFolder}/src/main.js",
  "outFiles": "${workspaceFolder}/dist/**/*.js",
  "cwd": "${workspaceFolder}",
  "env": {
    "CONFIG_PATH": "${workspaceFolder}/config"
  }
}
```

### 2. Multi-root Workspaces

```json
{
  "compounds": [
    {
      "name": "Full Stack",
      "configurations": ["Backend (workspace1)", "Frontend (workspace2)"]
    }
  ]
}
```

### 3. Task Integration

```json
{
  "preLaunchTask": "build",
  "postDebugTask": "cleanup",
  "serverReadyAction": {
    "pattern": "Server started on port ([0-9]+)",
    "uriFormat": "http://localhost:%s",
    "action": "openExternally"
  }
}
```

## Troubleshooting Guide

### Common Issues and Solutions

1. **Source Maps Not Working**

   ```json
   {
     "sourceMaps": true,
     "outFiles": ["${workspaceFolder}/dist/**/*.js"],
     "sourceMapPathOverrides": {
       "webpack:///./~/*": "${workspaceFolder}/node_modules/*",
       "webpack:///src/*": "${workspaceFolder}/src/*"
     }
   }
   ```

2. **Path Resolution**

   ```json
   {
     "resolveSourceMapLocations": [
       "${workspaceFolder}/**",
       "!**/node_modules/**"
     ],
     "skipFiles": ["<node_internals>/**", "${workspaceFolder}/node_modules/**"]
   }
   ```

3. **Performance Issues**

   ```json
   {
     "trace": true,
     "logLevel": "verbose",
     "timeout": 20000,
     "skipFiles": ["<node_internals>/**", "**/node_modules/**"]
   }
   ```

### Debug Adapter Protocol (DAP)

Understanding DAP helps in troubleshooting:

1. Request/Response flow
2. Event handling
3. Protocol extensions
4. Custom debug adapters

## Additional Resources

1. [Official VS Code Debugging Documentation](https://code.visualstudio.com/docs/editor/debugging)
2. [Debug Adapter Protocol Specification](https://microsoft.github.io/debug-adapter-protocol/)
3. [VS Code Debug Extensions](https://marketplace.visualstudio.com/search?term=debug&target=VSCode)
4. [Language-specific Debugging Guides](https://code.visualstudio.com/docs/languages/overview)
5. [Remote Debugging Documentation](https://code.visualstudio.com/docs/remote/remote-overview)

## Conclusion

This comprehensive guide covers the full spectrum of VS Code's debugging capabilities. From basic configuration to advanced scenarios, mastering these features will significantly enhance your development workflow. Remember that different programming languages and frameworks may have specific debugging requirements and capabilities. Regularly check the official documentation and your specific language/framework guides for updates and best practices.
